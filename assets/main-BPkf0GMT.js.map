{"version":3,"file":"main-BPkf0GMT.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * PROJECT: node-forge.blog\n * VERSION: 1.0.0\n * DESCRIPTION: Главный скрипт для управления интерактивностью, \n * валидацией и анимациями.\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК (LUCIDE) ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        direction: 'vertical',\n        gestureDirection: 'vertical',\n        smooth: true,\n        mouseMultiplier: 1,\n        smoothTouch: false,\n        touchMultiplier: 2,\n        infinite: false,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // --- 3. МОБИЛЬНОЕ МЕНЮ ---\n    const burger = document.querySelector('.header__burger');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const menuLinks = document.querySelectorAll('.mobile-menu__link, .header__cta');\n\n    const toggleMenu = () => {\n        mobileMenu.classList.toggle('active');\n        burger.classList.toggle('active'); // Класс для анимации самого бургер-значка\n        document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';\n    };\n\n    burger.addEventListener('click', toggleMenu);\n\n    // Закрываем меню при клике на ссылки\n    menuLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            if (mobileMenu.classList.contains('active')) {\n                toggleMenu();\n            }\n        });\n    });\n\n    // --- 4. ЭФФЕКТЫ ПРИ СКРОЛЛЕ (HEADER) ---\n    const headerNav = document.querySelector('.header__nav');\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            headerNav.style.padding = '8px 24px';\n            headerNav.style.background = 'rgba(30, 34, 41, 0.95)';\n            headerNav.style.boxShadow = '0 10px 30px rgba(0,0,0,0.3)';\n        } else {\n            headerNav.style.padding = '12px 32px';\n            headerNav.style.background = 'rgba(30, 34, 41, 0.8)';\n            headerNav.style.boxShadow = 'none';\n        }\n    });\n\n    // --- 5. АНИМАЦИИ (GSAP + INTERSECTION OBSERVER) ---\n    \n    // Анимация Hero секции при загрузке\n    gsap.from(\".hero__title\", {\n        opacity: 0,\n        y: 60,\n        duration: 1.2,\n        ease: \"power4.out\",\n        delay: 0.3\n    });\n\n    gsap.from(\".hero__subtitle\", {\n        opacity: 0,\n        y: 30,\n        duration: 1,\n        ease: \"power3.out\",\n        delay: 0.6\n    });\n\n    gsap.from(\".hero__btns\", {\n        opacity: 0,\n        y: 20,\n        duration: 1,\n        ease: \"power3.out\",\n        delay: 0.8\n    });\n\n    // Параллакс эффект для карточек преимуществ (на чистом JS для легкости)\n    const benefitCards = document.querySelectorAll('.benefit-card');\n    const observerOptions = { threshold: 0.1 };\n\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.style.opacity = '1';\n                entry.target.style.transform = 'translateY(0)';\n            }\n        });\n    }, observerOptions);\n\n    benefitCards.forEach(card => {\n        card.style.opacity = '0';\n        card.style.transform = 'translateY(40px)';\n        card.style.transition = 'all 0.8s cubic-bezier(0.23, 1, 0.32, 1)';\n        observer.observe(card);\n    });\n\n    // --- 6. ВАЛИДАЦИЯ ФОРМЫ И КАПЧА ---\n    const contactForm = document.getElementById('contactForm');\n    const phoneInput = document.getElementById('phone');\n    const captchaQuestion = document.getElementById('captcha-question');\n    const captchaInput = document.getElementById('captcha-answer');\n    const formResponse = document.getElementById('formResponse');\n\n    let n1, n2;\n\n    // Функция генерации капчи\n    const generateCaptcha = () => {\n        n1 = Math.floor(Math.random() * 10) + 1;\n        n2 = Math.floor(Math.random() * 10) + 1;\n        if (captchaQuestion) {\n            captchaQuestion.innerText = `Подтвердите, что вы не бот: ${n1} + ${n2} =`;\n        }\n    };\n\n    generateCaptcha();\n\n    // СТРОГАЯ ВАЛИДАЦИЯ ТЕЛЕФОНА (Запрет на ввод букв)\n    if (phoneInput) {\n        phoneInput.addEventListener('input', function(e) {\n            // Заменяем всё, что не цифра, на пустую строку\n            const cleanValue = this.value.replace(/[^\\d+]/g, '');\n            if (this.value !== cleanValue) {\n                this.value = cleanValue;\n            }\n        });\n    }\n\n    // Обработка отправки формы\n    if (contactForm) {\n        contactForm.addEventListener('submit', function(e) {\n            e.preventDefault();\n\n            const userAnswer = parseInt(captchaInput.value);\n            const phoneValue = phoneInput.value.replace(/\\D/g, ''); // Чисто цифры для проверки длины\n\n            // 1. Проверка капчи\n            if (userAnswer !== (n1 + n2)) {\n                alert('Ошибка: Неверный ответ на математический пример.');\n                generateCaptcha();\n                captchaInput.value = '';\n                return;\n            }\n\n            // 2. Проверка длины телефона\n            if (phoneValue.length < 9) {\n                alert('Пожалуйста, введите корректный номер телефона (минимум 9 цифр).');\n                return;\n            }\n\n            // Имитация AJAX отправки\n            const submitBtn = this.querySelector('button[type=\"submit\"]');\n            submitBtn.disabled = true;\n            submitBtn.innerText = 'Отправка...';\n\n            setTimeout(() => {\n                formResponse.innerText = \"Успешно! Мы получили ваш запрос и свяжемся с вами в течение 24 часов.\";\n                formResponse.className = \"form-message success\";\n                formResponse.style.display = \"block\";\n                \n                contactForm.reset();\n                submitBtn.disabled = false;\n                submitBtn.innerText = 'Запросить доступ';\n                generateCaptcha();\n\n                // Скрываем сообщение через 5 секунд\n                setTimeout(() => {\n                    formResponse.style.display = \"none\";\n                }, 5000);\n            }, 1500);\n        });\n    }\n\n    // --- 7. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookiePopup');\n    const acceptBtn = document.getElementById('acceptCookies');\n\n    if (cookiePopup && !localStorage.getItem('nodeForge_cookies')) {\n        setTimeout(() => {\n            cookiePopup.style.display = 'block';\n            gsap.from(cookiePopup, {\n                y: 50,\n                opacity: 0,\n                duration: 0.6,\n                ease: \"power2.out\"\n            });\n        }, 2000);\n    }\n\n    if (acceptBtn) {\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('nodeForge_cookies', 'true');\n            gsap.to(cookiePopup, {\n                y: 50,\n                opacity: 0,\n                duration: 0.4,\n                onComplete: () => cookiePopup.style.display = 'none'\n            });\n        });\n    }\n});\n\n// Дополнительный эффект: Параллакс для фонового блоба в Hero\nwindow.addEventListener('mousemove', (e) => {\n    const blob = document.querySelector('.hero__blob');\n    if (blob) {\n        const mouseX = e.clientX / window.innerWidth;\n        const mouseY = e.clientY / window.innerHeight;\n        gsap.to(blob, {\n            x: mouseX * 40,\n            y: mouseY * 40,\n            duration: 2,\n            ease: \"power2.out\"\n        });\n    }\n});"],"names":["lenis","raf","time","burger","mobileMenu","menuLinks","toggleMenu","link","headerNav","benefitCards","observerOptions","observer","entries","entry","card","contactForm","phoneInput","captchaQuestion","captchaInput","formResponse","n1","n2","generateCaptcha","e","cleanValue","userAnswer","phoneValue","submitBtn","cookiePopup","acceptBtn","blob","mouseX","mouseY"],"mappings":"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"}